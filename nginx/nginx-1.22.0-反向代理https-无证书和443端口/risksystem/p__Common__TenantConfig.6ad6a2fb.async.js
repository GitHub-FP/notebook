(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[23],{"4ZnT":function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return u})),n.d(t,"a",(function(){return l}));var a=n("c1Ei"),i=n.n(a),r=n("5Tp6"),p=n("t3Un");function o(e){return c.apply(this,arguments)}function c(){return c=Object(r["a"])(i.a.mark((function e(t){return i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(p["a"])("".concat("/service","/api/Common/GetConfigs"),{method:"GET",params:t}));case 1:case"end":return e.stop()}}),e)}))),c.apply(this,arguments)}function u(e){return s.apply(this,arguments)}function s(){return s=Object(r["a"])(i.a.mark((function e(t){return i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(p["a"])("".concat("/service","/api/Common/setConfig"),{method:"POST",body:t}));case 1:case"end":return e.stop()}}),e)}))),s.apply(this,arguments)}function l(e){return f.apply(this,arguments)}function f(){return f=Object(r["a"])(i.a.mark((function e(t){return i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(p["a"])("".concat("/service","/api/Common/EncryptUserName"),{method:"GET",body:t}));case 1:case"end":return e.stop()}}),e)}))),f.apply(this,arguments)}},XFxA:function(e,t,n){e.exports={container:"antd-pro-pages-common-style-container"}},Z55y:function(e,t,n){"use strict";n.r(t);var a,i,r,p,o=n("XKWP"),c=n("N7Kx"),u=n("kFHX"),s=n("4jIl"),l=n("XEnU"),f=n("q1tI"),g=n.n(f),m=n("MuoO"),h=n("rzhl"),d=n("aglU"),y=(a=Object(m["connect"])((function(e){var t=e.tenant;return Object(l["a"])({},t)})),i=Reflect.metadata("design:type",Function),r=Reflect.metadata("design:paramtypes",[void 0]),a(p=i(p=r(p=function(e){Object(u["a"])(n,e);var t=Object(s["a"])(n);function n(e){var a;return Object(o["a"])(this,n),a=t.call(this,e),a.state={},a}return Object(c["a"])(n,[{key:"componentDidMount",value:function(){var e=this.props.dispatch;e({type:"tenant/getPbiGroupsInTenant"})}},{key:"render",value:function(){var e=d.tenantConfig;return g.a.createElement("div",null,g.a.createElement(h["a"],{cfgType:"Tenant",propsSchema:e}))}}]),n}(f["Component"]))||p)||p)||p);t["default"]=y},aglU:function(e){e.exports=JSON.parse('{"systemConfig":{"type":"object","properties":{"TenantPbiScope":{"title":"app.tenant.config.tenantPbiScope","type":"string","enum":[],"enumNames":[]},"Theme":{"title":"app.tenant.config.theme","type":"array","items":{"type":"string"},"enum":[],"enumNames":[]},"DefualtTheme":{"title":"app.tenant.config.defualtTheme","type":"string","enum":[],"enumNames":[]},"MenuIgnoreAuth":{"title":"app.tenant.config.menuIgnoreAuth","type":"boolean","default":false},"MultiTabPageEnable":{"title":"app.tenant.config.multiTabPageEnable","type":"boolean","default":false},"SearchPage":{"title":"app.tenant.config.searchPage","type":"string"},"PersonalPage":{"title":"app.tenant.config.personalPage","type":"string"},"UserAuthDingTalkAppKey":{"title":"app.tenant.config.userAuthDingTalkAppKey","type":"string"},"UserAuthDingTalkAppSecret":{"title":"app.tenant.config.userAuthDingTalkAppSecret","type":"string"},"UserAuthDingTalkCorpID":{"title":"app.tenant.config.userAuthDingTalkCorpID","type":"string"}}},"tenantConfig":{"type":"object","properties":{"TenantPbiScope":{"title":"app.tenant.config.tenantPbiScope","type":"string","enum":[],"enumNames":[]},"TenantDefaultPbiGroup":{"title":"app.tenant.config.tenantGroup","type":"string","enum":[],"enumNames":[]},"MenuAttr1":{"title":"app.tenant.config.menuAttr1","type":"string","ui:widget":"LocaleInput"},"MenuAttr2":{"title":"app.tenant.config.menuAttr2","type":"string","ui:widget":"LocaleInput"},"MenuAttr3":{"title":"app.tenant.config.menuAttr3","type":"string","ui:widget":"LocaleInput"},"MenuAttr4":{"title":"app.tenant.config.menuAttr4","type":"string","ui:widget":"LocaleInput"},"MenuAttr5":{"title":"app.tenant.config.menuAttr5","type":"string","ui:widget":"LocaleInput"},"Theme":{"title":"app.tenant.config.theme","type":"array","items":{"type":"string"},"enum":[],"enumNames":[]},"DefualtTheme":{"title":"app.tenant.config.defualtTheme","type":"string","enum":[],"enumNames":[]},"MenuIgnoreAuth":{"title":"app.tenant.config.menuIgnoreAuth","type":"boolean","default":false},"MultiTabPageEnable":{"title":"app.tenant.config.multiTabPageEnable","type":"boolean","default":false},"FooterEnable":{"title":"app.tenant.config.footerEnable","type":"boolean","default":false},"SearchPage":{"title":"app.tenant.config.searchPage","type":"string"},"PersonalPage":{"title":"app.tenant.config.personalPage","type":"string"},"AuthApplicationUrl":{"title":"app.tenant.config.authApplicationUrl","type":"string"},"ConfigUserName":{"title":"app.tenant.config.configUserName","type":"string"},"ConfigDataRole":{"title":"app.tenant.config.configDataRole","type":"string"},"ReportExportPPT":{"title":"\u62a5\u8868\u5bfc\u51faPPT\u529f\u80fd","type":"boolean","default":false}}}}')},rzhl:function(e,t,n){"use strict";n("+L6B");var a,i,r,p,o,c,u,s,l=n("2/Rp"),f=(n("miYZ"),n("tsqr")),g=n("XKWP"),m=n("N7Kx"),h=n("kFHX"),d=n("4jIl"),y=n("XEnU"),b=n("q1tI"),v=n.n(b),T=n("MuoO"),C=n("9kvl"),O=n("ZwyN"),P=n.n(O),j=n("4ZnT"),S=(n("5NDa"),n("5rEg")),D=n("PenQ"),A=n("+n12"),N=(a=Object(T["connect"])((function(e){var t=e.settings;return Object(y["a"])({},t)})),i=Reflect.metadata("design:type",Function),r=Reflect.metadata("design:paramtypes",[void 0]),a(p=i(p=r(p=function(e){Object(h["a"])(n,e);var t=Object(d["a"])(n);function n(e){var a;return Object(g["a"])(this,n),a=t.call(this,e),a.handleChange=function(e){var t=a.props,n=t.languages,i=t.name,r=t.onChange,p=a.state.value,o={};n.forEach((function(t){o[t]=e.target.name===t?e.target.value:p[t]})),a.setState({value:o}),r(i,JSON.stringify(o))},a.state={value:{}},a.handleChange=a.handleChange.bind(Object(D["a"])(a)),a}return Object(m["a"])(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.value,n=e.languages,a={},i=t&&Object(A["k"])(t)?JSON.parse(t.replace(/\n/g,"\\n").replace(/\r/g,"\\r")):{};n.forEach((function(e){a[e]=i[e]||""})),this.setState({value:a})}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){if(!this.props.value){var t=e.value,n=e.languages,a={},i=t&&Object(A["k"])(t)?JSON.parse(t.replace(/\n/g,"\\n").replace(/\r/g,"\\r")):{};n.forEach((function(e){a[e]=i[e]||""})),this.setState({value:a})}}},{key:"render",value:function(){var e=this,t=this.props.languages,n=this.state.value,a=t.map((function(t){return v.a.createElement(S["a"],{value:n[t],name:t,addonBefore:t,onChange:e.handleChange})}));return v.a.createElement("div",{style:{width:"100%"}},a)}}]),n}(b["Component"]))||p)||p)||p),E=N,k=n("XFxA"),w=n.n(k),I=(o=Object(T["connect"])((function(e){var t=e.dictionary,n=e.tenant;return Object(y["a"])({themeDic:t.themeDic,tenantPbiScopeDic:t.tenantPbiScopeDic},n)})),c=Reflect.metadata("design:type",Function),u=Reflect.metadata("design:paramtypes",[void 0]),o(s=c(s=u(s=function(e){Object(h["a"])(n,e);var t=Object(d["a"])(n);function n(e){var a;return Object(g["a"])(this,n),a=t.call(this,e),a.getConfigs=function(e){var t=a.props.propsSchema,n=t.properties;j["b"]({cfgType:e}).then((function(e){if(0===e.errorCode){var t={};e.result.forEach((function(e){var a=n["".concat(e.cfgCode)];a&&("array"===a.type?t["".concat(e.cfgCode)]=JSON.parse(e.cfgValue)||[]:"boolean"===a.type?t["".concat(e.cfgCode)]="true"===e.cfgValue||!1:t["".concat(e.cfgCode)]=e.cfgValue||"")})),a.setState({formData:t})}}))},a.handleSave=function(){var e=a.props.cfgType,t=a.state.formData,n=[];Object.keys(t).map((function(a){if("undefined"!==typeof t[a]){var i={};i="[object Array]"===Object.prototype.toString.call(t[a])?{cfgType:e,CfgCode:a,CfgValue:JSON.stringify(t[a])}:{cfgType:e,CfgCode:a,CfgValue:t[a]},n.push(i)}})),j["c"](n).then((function(t){0===t.errorCode&&(f["default"].success(Object(C["c"])({id:"app.common.message.submitSuccessfully"})),a.getConfigs(e))}))},a.handleChange=function(e){a.setState({formData:e})},a.state={formData:{}},a}return Object(m["a"])(n,[{key:"componentDidMount",value:function(){var e=this.props.cfgType;this.getConfigs(e)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this.props.cfgType;t!==e.cfgType&&this.getConfigs(e.cfgType)}},{key:"render",value:function(){var e=this.props,t=e.themeDic,n=e.tenantPbiScopeDic,a=e.propsSchema,i=e.tenantPbiGroups,r=e.cfgType,p=this.state.formData,o=[],c=[];if(t&&t.length>0&&t.map((function(e){o.push(e.dicCode),c.push(e.dicName)})),r&&"Tenant"===r){var u=[],s=[];i&&i.length&&i.map((function(e){u.push(e.pbiGroupId),s.push(e.pbiGroupName||"")})),a.properties.TenantDefaultPbiGroup.enum=u,a.properties.TenantDefaultPbiGroup.enumNames=s}a.properties.Theme.enum=o,a.properties.Theme.enumNames=c,a.properties.DefualtTheme.enum=o,a.properties.DefualtTheme.enumNames=c;var f=[],g=[];n&&n.length>0&&n.map((function(e){f.push(e.dicCode),g.push(e.dicName)})),a.properties.TenantPbiScope.enum=f,a.properties.TenantPbiScope.enumNames=g;var m={TenantPbiScope:{"ui:disabled":!1}};return Object.keys(a.properties).map((function(e){a.properties[e].title=Object(C["c"])({id:a.properties[e].title})})),v.a.createElement("div",null,v.a.createElement("div",{className:w.a.container},v.a.createElement(P.a,{propsSchema:a,uiSchema:m,formData:p,onChange:this.handleChange,widgets:{LocaleInput:E}}),v.a.createElement(l["a"],{type:"primary",onClick:this.handleSave},Object(C["c"])({id:"app.common.save"}))))}}]),n}(b["Component"]))||s)||s)||s);t["a"]=I}}]);