(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[19],{"9WVD":function(e,t,r){"use strict";r.d(t,"n",(function(){return i})),r.d(t,"h",(function(){return p})),r.d(t,"r",(function(){return f})),r.d(t,"m",(function(){return h})),r.d(t,"t",(function(){return l})),r.d(t,"j",(function(){return v})),r.d(t,"p",(function(){return y})),r.d(t,"l",(function(){return T})),r.d(t,"q",(function(){return k})),r.d(t,"i",(function(){return G})),r.d(t,"f",(function(){return x})),r.d(t,"e",(function(){return R})),r.d(t,"g",(function(){return I})),r.d(t,"u",(function(){return C})),r.d(t,"d",(function(){return N})),r.d(t,"k",(function(){return U})),r.d(t,"s",(function(){return W})),r.d(t,"v",(function(){return X})),r.d(t,"o",(function(){return L})),r.d(t,"x",(function(){return J})),r.d(t,"w",(function(){return M})),r.d(t,"a",(function(){return B})),r.d(t,"b",(function(){return _})),r.d(t,"c",(function(){return $}));var n=r("c1Ei"),a=r.n(n),c=r("5Tp6"),u=r("t3Un");function i(e){return o.apply(this,arguments)}function o(){return o=Object(c["a"])(a.a.mark((function e(t){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(u["a"])("".concat("/service","/api/AzurePbi/GetGroups"),{method:"GET",params:t}));case 1:case"end":return e.stop()}}),e)}))),o.apply(this,arguments)}function p(e){return s.apply(this,arguments)}function s(){return s=Object(c["a"])(a.a.mark((function e(t){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(u["a"])("".concat("/service","/api/AzurePbi/GetAzureGroup"),{method:"GET",params:t}));case 1:case"end":return e.stop()}}),e)}))),s.apply(this,arguments)}function f(e){return b.apply(this,arguments)}function b(){return b=Object(c["a"])(a.a.mark((function e(t){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(u["a"])("".concat("/service","/api/AzurePbi/GetReportsInGroup"),{method:"GET",params:t}));case 1:case"end":return e.stop()}}),e)}))),b.apply(this,arguments)}function h(e){return d.apply(this,arguments)}function d(){return d=Object(c["a"])(a.a.mark((function e(t){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(u["a"])("".concat("/service","/api/AzurePbi/GetDatasetsInGroup"),{method:"GET",params:t}));case 1:case"end":return e.stop()}}),e)}))),d.apply(this,arguments)}function l(e){return m.apply(this,arguments)}function m(){return m=Object(c["a"])(a.a.mark((function e(t){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(u["a"])("".concat("/service","/api/AzurePbi/RefreshDataset"),{method:"GET",params:t}));case 1:case"end":return e.stop()}}),e)}))),m.apply(this,arguments)}function v(e){return w.apply(this,arguments)}function w(){return w=Object(c["a"])(a.a.mark((function e(t){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(u["a"])("".concat("/service","/api/AzurePbi/GetDashboardsInGroup"),{method:"GET",params:t}));case 1:case"end":return e.stop()}}),e)}))),w.apply(this,arguments)}function y(e){return O.apply(this,arguments)}function O(){return O=Object(c["a"])(a.a.mark((function e(t){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(u["a"])("".concat("/service","/api/AzurePbi/GetReportInGroup"),{method:"GET",params:t}));case 1:case"end":return e.stop()}}),e)}))),O.apply(this,arguments)}function T(e){return j.apply(this,arguments)}function j(){return j=Object(c["a"])(a.a.mark((function e(t){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(u["a"])("".concat("/service","/api/AzurePbi/GetDatasetInGroup"),{method:"GET",params:t}));case 1:case"end":return e.stop()}}),e)}))),j.apply(this,arguments)}function k(e){return P.apply(this,arguments)}function P(){return P=Object(c["a"])(a.a.mark((function e(t){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(u["a"])("".concat("/service","/api/AzurePbi/GetReportPages"),{method:"GET",params:t}));case 1:case"end":return e.stop()}}),e)}))),P.apply(this,arguments)}function G(e){return E.apply(this,arguments)}function E(){return E=Object(c["a"])(a.a.mark((function e(t){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(u["a"])("".concat("/service","/api/AzurePbi/GetDashboardInGroup"),{method:"GET",params:t}));case 1:case"end":return e.stop()}}),e)}))),E.apply(this,arguments)}function x(e){return z.apply(this,arguments)}function z(){return z=Object(c["a"])(a.a.mark((function e(t){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(u["a"])("".concat("/service","/api/AzurePbi/GenerateReportTokenInGroup"),{method:"GET",params:t}));case 1:case"end":return e.stop()}}),e)}))),z.apply(this,arguments)}function R(e){return A.apply(this,arguments)}function A(){return A=Object(c["a"])(a.a.mark((function e(t){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(u["a"])("".concat("/service","/api/AzurePbi/GenerateDashboardTokenInGroup"),{method:"GET",params:t}));case 1:case"end":return e.stop()}}),e)}))),A.apply(this,arguments)}function I(e){return g.apply(this,arguments)}function g(){return g=Object(c["a"])(a.a.mark((function e(t){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(u["a"])("".concat("/service","/api/AzurePbi/GenerateTokenForCreate"),{method:"GET",params:t}));case 1:case"end":return e.stop()}}),e)}))),g.apply(this,arguments)}function C(e){return D.apply(this,arguments)}function D(){return D=Object(c["a"])(a.a.mark((function e(t){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(u["a"])("".concat("/service","/api/AzurePbi/SaveAsReport"),{method:"POST",body:t}));case 1:case"end":return e.stop()}}),e)}))),D.apply(this,arguments)}function N(e){return S.apply(this,arguments)}function S(){return S=Object(c["a"])(a.a.mark((function e(t){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(u["a"])("".concat("/service","/api/AzurePbi/ExportReportInGroup"),{method:"GET",getResponse:!0,params:t}));case 1:case"end":return e.stop()}}),e)}))),S.apply(this,arguments)}function U(e){return F.apply(this,arguments)}function F(){return F=Object(c["a"])(a.a.mark((function e(t){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(u["a"])("".concat("/service","/api/AzurePbi/GetDatasetByReport"),{method:"GET",params:t}));case 1:case"end":return e.stop()}}),e)}))),F.apply(this,arguments)}function W(e){return q.apply(this,arguments)}function q(){return q=Object(c["a"])(a.a.mark((function e(t){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(u["a"])("".concat("/service","/api/AzurePbi/PostPbiReport"),{method:"POST",body:t}));case 1:case"end":return e.stop()}}),e)}))),q.apply(this,arguments)}function X(e){return H.apply(this,arguments)}function H(){return H=Object(c["a"])(a.a.mark((function e(t){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(u["a"])("".concat("/service","/api/AzurePbi/SetReportExposurePermission"),{method:"GET",params:t}));case 1:case"end":return e.stop()}}),e)}))),H.apply(this,arguments)}function L(e){return V.apply(this,arguments)}function V(){return V=Object(c["a"])(a.a.mark((function e(t){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(u["a"])("".concat("/service","/api/AzurePbi/GetReportExposurePermission"),{method:"GET",params:t}));case 1:case"end":return e.stop()}}),e)}))),V.apply(this,arguments)}function J(e){return K.apply(this,arguments)}function K(){return K=Object(c["a"])(a.a.mark((function e(t){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(u["a"])("".concat("/service","/api/AzurePbi/CreateOrUpdatePbiReportsInGroup"),{method:"GET",params:t}));case 1:case"end":return e.stop()}}),e)}))),K.apply(this,arguments)}function M(e){return Z.apply(this,arguments)}function Z(){return Z=Object(c["a"])(a.a.mark((function e(t){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(u["a"])("".concat("/service","/api/pbi/UpdatePbiReport"),{method:"POST",body:t}));case 1:case"end":return e.stop()}}),e)}))),Z.apply(this,arguments)}function B(e){return Y.apply(this,arguments)}function Y(){return Y=Object(c["a"])(a.a.mark((function e(t){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(u["a"])("".concat("/service","/api/AzurePbi/DeletePbiDataset"),{method:"POST",body:t}));case 1:case"end":return e.stop()}}),e)}))),Y.apply(this,arguments)}function _(e){return Q.apply(this,arguments)}function Q(){return Q=Object(c["a"])(a.a.mark((function e(t){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(u["a"])("".concat("/service","/api/AzurePbi/DeletePbiReport"),{method:"POST",body:t}));case 1:case"end":return e.stop()}}),e)}))),Q.apply(this,arguments)}function $(e){return ee.apply(this,arguments)}function ee(){return ee=Object(c["a"])(a.a.mark((function e(t){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(u["a"])("".concat("/service","/api/AzurePbi/ExportFile"),{method:"GET",getResponse:!0,params:t}));case 1:case"end":return e.stop()}}),e)}))),ee.apply(this,arguments)}},GsCa:function(e,t,r){"use strict";r.r(t);r("miYZ");var n,a,c,u,i=r("tsqr"),o=(r("2qtc"),r("kLXV")),p=r("XKWP"),s=r("N7Kx"),f=r("kFHX"),b=r("4jIl"),h=r("XEnU"),d=r("q1tI"),l=r.n(d),m=r("dZk+"),v=r.n(m),w=r("9kvl"),y=r("9WVD"),O=r("+n12"),T=r("O335"),j=r.n(T),k=(n=Object(w["b"])((function(e){var t=e.menu;return Object(h["a"])({},t)})),a=Reflect.metadata("design:type",Function),c=Reflect.metadata("design:paramtypes",[void 0]),n(u=a(u=c(u=function(e){Object(f["a"])(r,e);var t=Object(b["a"])(r);function r(e){var n;return Object(p["a"])(this,r),n=t.call(this,e),n.refreshEmbedToken=function(e){y["g"]({PbiDatasetId:e}).then((function(t){if(0===t.errorCode&&t.result){var r=t.result,a=new Date(Object(O["c"])(r.expiration)),c=a.getTime()-(new Date).getTime()-6e5;n.refreshTokenTimer&&clearTimeout(n.refreshTokenTimer),n.refreshTokenTimer=setTimeout((function(){n.refreshEmbedToken(e)}),c)}}))},n.embedReport=function(e){var t="zh-CN";y["g"]({PbiDatasetId:e}).then((function(r){if(0===r.errorCode&&r.result){var a=r.result,c=n.props.dispatch,u="aad"===a.azureTokenType?v.a.models.TokenType.Aad:v.a.models.TokenType.Embed,p=a.token,s=a.azureEmbedUrl,f=e,b=a.pbiGroupId;n.embedContainer.innerHTML="<div/>";var h="".concat(document.body.clientHeight-114,"px");n.embedContainer.firstChild.style.height=h,n.embedContainer.firstChild.className="embedFrame",n.report=powerbi.createReport(n.embedContainer.firstChild,{tokenType:u,accessToken:p,embedUrl:s,datasetId:f,settings:{localeSettings:{language:t&&"zh-CN"!==t?"en":"zh-CN",formatLocale:"es"}}});var d=new Date(Object(O["c"])(a.expiration)),m=d.getTime()-(new Date).getTime()-6e5;n.refreshTokenTimer&&clearTimeout(n.refreshTokenTimer),n.refreshTokenTimer=setTimeout((function(){n.refreshEmbedToken(e)}),m),n.report.off("saved"),n.report.on("saved",(function(e){var t={},r=e.detail.reportObjectId,n=e.detail.reportName,a=e.detail.saveAs;a&&(t.PbiGroupId=b,t.PbiReportId=r,t.PbiReportName=n,t.PbiDatasetId=f,t.PbiRptSettings='{"filterPaneEnabled":false,"navContentPaneEnabled":false}',y["u"](t).then((function(e){if(0===e.errorCode){e.result.pbiReportName!==t.PbiReportName?o["a"].info({title:Object(w["c"])({id:"app.azureblob.success.save"}),content:l.a.createElement("div",null,l.a.createElement("p",null,"\u4e3a\u60a8\u91cd\u547d\u540d\u4e3a: ".concat(e.result.pbiReportName))),onOk:function(){}}):i["default"].success(Object(w["c"])({id:"app.azureblob.success.save"}));var r=e.result.pbiReportId;c({type:"menu/removeTabItem",payload:{path:"/azurePbi/reportCreate"}});var n="/azurepbi/reportview/group/".concat(b,"/report/").concat(r,"?reportName=").concat(e.result.pbiReportName);w["e"].push(n)}})))}))}}))},n.embedContainer=null,n.report=null,n.refreshTokenTimer="",n}return Object(s["a"])(r,[{key:"componentDidMount",value:function(){var e=this.props.match,t=e.params.id;this.embedReport(t)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this.props.match,r=t.params.id,n=e.match.params.id;n&&r!==n&&this.embedReport(n)}},{key:"componentWillUnmount",value:function(){this.refreshTokenTimer&&clearTimeout(this.refreshTokenTimer)}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:j.a.content},l.a.createElement("div",{ref:function(t){e.embedContainer=t}}))}}]),r}(d["Component"]))||u)||u)||u);t["default"]=k},O335:function(e,t,r){e.exports={content:"antd-pro-pages-azure-pbi-report-content"}}}]);